<body>
    <div class="container">
        <div class="row">
            <div class="col-lg-8  offset-lg-2">


                <form method="post" action="{{ url_for('tasks') }}">
                    <button type="submit" id="start-seizure" >click</button>
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                </form>

                <img src="{{ url_for('video_feed') }}" height="80%">

            </div>
        </div>
    </div>
    </body>
<script>

    document.getElementById('start-seizure').addEventListener('click', epilepsy);
    function epilepsy() {
    const colors = ['red', 'purple', 'blue', 'green', 'yellow', 'orange']; // Colors to flash
    let index = 0;
    let originalBodyBg = document.body.style.backgroundColor;

    const intervalId = setInterval(() => {
        document.body.style.backgroundColor = colors[index];
        index = (index + 1) % colors.length;
    }, 500); // <--- set time where 100 = 0.1s

    const allElements = document.querySelectorAll('div, p');
    let originalOpacities = [];
    allElements.forEach((el, idx) => {
        originalOpacities.push(el.style.opacity);
        if (idx % 2 === 0) {
            el.style.opacity = 0;
        }
    });

    function revertChanges() {
        clearInterval(intervalId);
        document.body.style.backgroundColor = originalBodyBg;
        allElements.forEach((el, idx) => {
            el.style.opacity = originalOpacities[idx];
        });
    }
    setTimeout(revertChanges, 10000); // <-- edit this to change time the function flashes for
}
</script>
